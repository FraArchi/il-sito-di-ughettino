<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ugo AI Companion - Chat con Ugo</title>
    <meta name="description" content="Chatta con Ugo AI, il compagno digitale di Ugo il Golden Retriever. Intelligenza artificiale locale, privacy garantita.">
    <link rel="stylesheet" href=".CSS/style.css">
    <link rel="stylesheet" href=".CSS/ugoAI.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#b97a56">
    
    <!-- Google tag (gtag.js) con Consent Mode -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-M7R4KXNLWL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('consent', 'default', { 'ad_storage': 'denied', 'analytics_storage': 'denied' });
      gtag('config', 'G-M7R4KXNLWL', { 'anonymize_ip': true, 'allow_ad_personalization_signals': false });
    </script>
    
    <!-- Prevent indexing for now -->
    <meta name="robots" content="noindex, nofollow">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { theme: { extend: { colors: { ugo: { primary: '#b97a56', secondary: '#2d1c0f', accent: '#f97316', bg: '#f8f6f0' } }, fontFamily: { display: ['Playfair Display','serif'], sans: ['Inter','ui-sans-serif','system-ui'] }, borderRadius: { xl: '12px' }, boxShadow: { soft: '0 2px 12px rgba(0,0,0,0.1)' } } } };
    </script>
</head>
<body>
    <a class="skip-link" href="#main">Salta al contenuto</a>
    <header class="header-sticky" role="banner">
        <div class="header-content">
            <a href="index.html" class="logo" aria-label="Home">üêæ Ugo</a>
            <div class="menu-toggle" id="menu-toggle" aria-label="Apri menu" aria-expanded="false" aria-controls="nav-menu">
                <span></span><span></span><span></span>
            </div>
            <nav aria-label="Navigazione principale">
                <ul id="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href=".HTML/dashboard.html">Dashboard</a></li>
                    <li><a href=".HTML/ugo-ai.html" class="active">Ugo AI</a></li>
                    <li><a href=".HTML/ugo-stories.html">Storie</a></li>
                    <li><a href=".HTML/quiz.html">Quiz</a></li>
                    <li><a href=".HTML/photobooth.html">Photo Booth</a></li>
                    <li><a href=".HTML/faq.html">FAQ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main" class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <h1>ü§ñ Ugo AI Companion</h1>
                <p>Chatta con l'intelligenza artificiale di Ugo! Scopri la sua personalit√† dinamica, le sue emozioni e vivi conversazioni uniche con il Golden Retriever pi√π intelligente del web.</p>
                
                <div class="hero-features">
                    <div class="feature-card">
                        <div class="feature-icon">üß†</div>
                        <h3>Personalit√† Autentica</h3>
                        <p>Ugo AI evolve e impara dalle conversazioni, sviluppando tratti unici</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">‚ù§Ô∏è</div>
                        <h3>Emozioni Dinamiche</h3>
                        <p>Reagisce con emozioni reali: eccitazione, curiosit√†, affetto, giocosit√†</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üîí</div>
                        <h3>Privacy Totale</h3>
                        <p>AI locale con Ollama - i tuoi dati restano sempre sul tuo dispositivo</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">üß†</div>
                        <h3>Memoria Intelligente</h3>
                        <p>Ricorda le conversazioni e si adatta alle tue preferenze</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Status Section -->
        <section class="ai-status-section">
            <div class="container">
                <h2>üîß Stato del Sistema AI</h2>
                <div id="ai-status" class="ai-status-grid">
                    <div class="status-card">
                        <div class="status-icon">‚ö°</div>
                        <div class="status-info">
                            <h4>Ollama Server</h4>
                            <div class="status-indicator" id="ollama-status">
                                <span class="status-dot checking"></span>
                                <span>Verificando...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">ü§ñ</div>
                        <div class="status-info">
                            <h4>Modello AI</h4>
                            <div class="status-indicator" id="model-status">
                                <span class="status-dot checking"></span>
                                <span>Caricando...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üíæ</div>
                        <div class="status-info">
                            <h4>Memoria</h4>
                            <div class="status-indicator" id="memory-status">
                                <span class="status-dot checking"></span>
                                <span>Inizializzando...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="status-card">
                        <div class="status-icon">üß†</div>
                        <div class="status-info">
                            <h4>Personalit√†</h4>
                            <div class="status-indicator" id="personality-status">
                                <span class="status-dot checking"></span>
                                <span>Configurando...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Section -->
        <section class="chat-section">
            <div class="container">
                <div class="ugo-ai-container">
                    <!-- Chat interface will be injected here by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Technical Info Section -->
        <section class="tech-info-section">
            <div class="container">
                <h2>üî¨ Dettagli Tecnici</h2>
                
                <div class="tech-grid">
                    <div class="tech-card">
                        <h3>üß† Architettura AI</h3>
                        <ul>
                            <li><strong>Modello Base:</strong> Llama 3.1 8B (Ollama)</li>
                            <li><strong>Personalit√†:</strong> Engine dinamico con 8 tratti</li>
                            <li><strong>Emozioni:</strong> Sistema reattivo multi-dimensionale</li>
                            <li><strong>Memoria:</strong> Breve e lungo termine con pattern recognition</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h3>üõ°Ô∏è Privacy & Sicurezza</h3>
                        <ul>
                            <li><strong>Processing:</strong> 100% locale, nessun cloud</li>
                            <li><strong>Dati:</strong> Memorizzati solo nel tuo browser/database</li>
                            <li><strong>Network:</strong> Zero connessioni a servizi esterni</li>
                            <li><strong>Controllo:</strong> Elimina conversazioni quando vuoi</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h3>‚ö° Performance</h3>
                        <ul>
                            <li><strong>Latenza:</strong> ~1-3 secondi per risposta</li>
                            <li><strong>Memoria:</strong> Fino a 100 conversazioni salvate</li>
                            <li><strong>Adattabilit√†:</strong> Evoluzione continua della personalit√†</li>
                            <li><strong>Efficienza:</strong> Ottimizzato per hardware consumer</li>
                        </ul>
                    </div>
                    
                    <div class="tech-card">
                        <h3>üéØ Caratteristiche Uniche</h3>
                        <ul>
                            <li><strong>Mood Tracking:</strong> 9 stati emotivi diversi</li>
                            <li><strong>Personality Evolution:</strong> Si adatta al tuo stile</li>
                            <li><strong>Context Awareness:</strong> Ricorda il contesto</li>
                            <li><strong>Feedback Learning:</strong> Migliora con i tuoi giudizi</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <!-- Usage Instructions -->
        <section class="instructions-section">
            <div class="container">
                <h2>üìñ Come Usare Ugo AI</h2>
                
                <div class="instructions-grid">
                    <div class="instruction-step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Avvia il Sistema</h3>
                            <p>Assicurati che Ollama sia in esecuzione sul tuo sistema. Ugo AI si collegher√† automaticamente al server locale.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Inizia a Chattare</h3>
                            <p>Scrivi un messaggio nella chat. Ugo AI risponder√† con la sua personalit√† autentica, usando azioni ed emoticon.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Fornisci Feedback</h3>
                            <p>Usa i pulsanti üëç üëé per valutare le risposte. Ugo imparer√† e adatter√† la sua personalit√†.</p>
                        </div>
                    </div>
                    
                    <div class="instruction-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Esplora Personalit√†</h3>
                            <p>Clicca sull'icona üß† per vedere l'evoluzione della personalit√† e le statistiche emotive di Ugo.</p>
                        </div>
                    </div>
                </div>
                
                <div class="tips-section">
                    <h3>üí° Suggerimenti per Conversazioni Migliori</h3>
                    <div class="tips-grid">
                        <div class="tip">
                            <strong>Sii Specifico:</strong> Chiedi delle avventure nel bosco o racconta della tua giornata
                        </div>
                        <div class="tip">
                            <strong>Usa Emozioni:</strong> Esprimi come ti senti, Ugo reagir√† di conseguenza
                        </div>
                        <div class="tip">
                            <strong>Gioca con Ugo:</strong> Proponi giochi, parla di palle o biscotti per eccitarlo
                        </div>
                        <div class="tip">
                            <strong>Fai Domande:</strong> Ugo ama raccontare storie e condividere le sue scoperte
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚öôÔ∏è Impostazioni Ugo AI</h3>
                <button class="modal-close" onclick="closeSettingsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <h4>üé≠ Personalit√†</h4>
                    <label>
                        <input type="checkbox" id="personality-evolution" checked>
                        Evoluzione automatica personalit√†
                    </label>
                    <label>
                        <input type="range" id="personality-intensity" min="0.5" max="1.5" step="0.1" value="1">
                        Intensit√† espressiva: <span id="intensity-value">1.0</span>
                    </label>
                </div>
                
                <div class="setting-group">
                    <h4>üíæ Memoria</h4>
                    <label>
                        <input type="checkbox" id="save-conversations" checked>
                        Salva conversazioni
                    </label>
                    <label>
                        <input type="number" id="memory-limit" min="10" max="200" value="50">
                        Limite conversazioni salvate
                    </label>
                </div>
                
                <div class="setting-group">
                    <h4>üîí Privacy</h4>
                    <button id="clear-memory" class="btn btn-warning">
                        Elimina Tutte le Conversazioni
                    </button>
                    <button id="reset-personality" class="btn btn-secondary">
                        Reset Personalit√†
                    </button>
                </div>
                
                <div class="setting-group">
                    <h4>üîß Tecnico</h4>
                    <label>
                        Ollama URL:
                        <input type="url" id="ollama-url" value="http://localhost:11434">
                    </label>
                    <label>
                        Modello:
                        <select id="ai-model">
                            <option value="llama3.1:8b">Llama 3.1 8B</option>
                            <option value="llama3.1:7b">Llama 3.1 7B</option>
                            <option value="ugo-assistant">Ugo Custom Model</option>
                        </select>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Settings Modal Functions
        function showSettingsModal() {
            document.getElementById('settings-modal').style.display = 'flex';
        }
        
        function closeSettingsModal() {
            document.getElementById('settings-modal').style.display = 'none';
        }
        
        // Status Check Functions
        async function checkAIStatus() {
            const statusElements = {
                ollama: document.getElementById('ollama-status'),
                model: document.getElementById('model-status'),
                memory: document.getElementById('memory-status'),
                personality: document.getElementById('personality-status')
            };
            
            try {
                // Check AI health
                const response = await fetch('/api/ugo-ai/health');
                const data = await response.json();
                
                if (data.success) {
                    updateStatus(statusElements.ollama, 'online', 'Connesso');
                    updateStatus(statusElements.model, 'online', data.data.model);
                    updateStatus(statusElements.memory, 'online', 'Attiva');
                    updateStatus(statusElements.personality, 'online', 'Configurata');
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                updateStatus(statusElements.ollama, 'offline', 'Non disponibile');
                updateStatus(statusElements.model, 'offline', 'Non caricato');
                updateStatus(statusElements.memory, 'offline', 'Non disponibile');
                updateStatus(statusElements.personality, 'offline', 'Non configurata');
                
                console.error('AI Status check failed:', error);
            }
        }
        
        function updateStatus(element, status, text) {
            const dot = element.querySelector('.status-dot');
            const span = element.querySelector('span:last-child');
            
            dot.className = `status-dot ${status}`;
            span.textContent = text;
        }
        
        // Settings Handlers
        document.addEventListener('DOMContentLoaded', function() {
            // Check AI status
            checkAIStatus();
            
            // Refresh status every 30 seconds
            setInterval(checkAIStatus, 30000);
            
            // Settings event listeners
            const intensitySlider = document.getElementById('personality-intensity');
            const intensityValue = document.getElementById('intensity-value');
            
            if (intensitySlider && intensityValue) {
                intensitySlider.addEventListener('input', function() {
                    intensityValue.textContent = this.value;
                });
            }
            
            // Clear memory button
            const clearMemoryBtn = document.getElementById('clear-memory');
            if (clearMemoryBtn) {
                clearMemoryBtn.addEventListener('click', function() {
                    if (confirm('Sei sicuro di voler eliminare tutte le conversazioni? Questa azione non pu√≤ essere annullata.')) {
                        // TODO: Implement clear memory API call
                        alert('Memoria eliminata con successo!');
                    }
                });
            }
            
            // Reset personality button
            const resetPersonalityBtn = document.getElementById('reset-personality');
            if (resetPersonalityBtn) {
                resetPersonalityBtn.addEventListener('click', function() {
                    if (confirm('Sei sicuro di voler resettare la personalit√† di Ugo ai valori predefiniti?')) {
                        // TODO: Implement reset personality API call
                        alert('Personalit√† di Ugo resettata!');
                    }
                });
            }
        });
        
        // Menu toggle functionality
        const menuToggle = document.getElementById('menu-toggle');
        const navMenu = document.getElementById('nav-menu');
        
        if (menuToggle && navMenu) {
            menuToggle.addEventListener('click', function() {
                navMenu.classList.toggle('active');
                menuToggle.classList.toggle('active');
            });
        }
        
        // Close modals on outside click
        window.addEventListener('click', function(e) {
            const settingsModal = document.getElementById('settings-modal');
            if (e.target === settingsModal) {
                closeSettingsModal();
            }
        });
    </script>
    
    <!-- Shared Menu Script -->
    <script src=".JS/menu.js"></script>
    <!-- Service Worker Registration -->
    <script src=".JS/sw-register.js"></script>
    <!-- Ugo AI Companion -->
    <script src=".JS/ugoAICompanion.js" defer></script>

    <footer>
      <div class="footer-content">
        <div class="footer-links">
          <a href=".HTML/chi-siamo.html">Chi Siamo</a>
          <a href=".HTML/contatti.html">Contatti</a>
          <a href=".HTML/privacy.html">Privacy Policy</a>
        </div>
        <p>&copy; 2025 Il Meraviglioso Mondo di Ugo. Creato con ‚ù§Ô∏è da Francesco Archidiacono.</p>
        <p>Seguimi su Instagram: <a href="https://instagram.com/fra.archi" target="_blank" rel="noopener noreferrer">@fra.archi</a></p>
      </div>
    </footer>

    <!-- Menu hamburger script -->
    <script>
      document.getElementById('menu-toggle')?.addEventListener('click', function() {
        const navMenu = document.getElementById('nav-menu');
        const menuToggle = document.getElementById('menu-toggle');
        navMenu.classList.toggle('active');
        menuToggle.classList.toggle('active');
        const expanded = menuToggle.classList.contains('active');
        menuToggle.setAttribute('aria-expanded', expanded ? 'true' : 'false');
      });
      document.querySelectorAll('nav a').forEach(link => {
        link.addEventListener('click', () => {
          document.getElementById('nav-menu')?.classList.remove('active');
          document.getElementById('menu-toggle')?.classList.remove('active');
          document.getElementById('menu-toggle')?.setAttribute('aria-expanded', 'false');
        });
      });
    </script>
</body>
</html>
